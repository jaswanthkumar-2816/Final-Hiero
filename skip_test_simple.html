<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Skip Functionality Test</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 40px; background: #f0f0f0; }
    
    .form-section { 
      margin-bottom: 50px; 
      position: relative; 
      transition: all 0.4s ease;
      background: white;
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }
    
    .form-section.skipped { 
      opacity: 0.4; 
      pointer-events: none; 
      max-height: 60px; 
      overflow: hidden; 
    }
    
    .form-section.skipped .form-content { 
      display: none; 
    }

    .section-title {
      font-size: 1.5rem; 
      color: #333; 
      margin-bottom: 20px; 
      display: flex; 
      align-items: center; 
      gap: 16px;
      font-weight: 700;
    }

    .skip-link {
      font-size: 0.85rem; 
      color: #0066cc; 
      cursor: pointer; 
      font-weight: 600;
      text-decoration: underline; 
      margin-left: 8px;
    }
    
    .skip-link:hover { 
      color: #004499; 
    }

    .form-content {
      padding: 15px 0;
    }

    .form-group { 
      margin-bottom: 20px; 
    }

    label { 
      display: block; 
      margin-bottom: 8px; 
      font-weight: 600; 
      color: #333; 
    }

    input, textarea {
      width: 100%; 
      padding: 12px; 
      border: 2px solid #ddd; 
      border-radius: 6px;
      font-size: 14px;
    }

    input:focus, textarea:focus { 
      outline: none; 
      border-color: #0066cc; 
    }

    .debug-info {
      background: #e8f4f8;
      padding: 15px;
      margin: 20px 0;
      border-radius: 4px;
      font-family: monospace;
      font-size: 14px;
      white-space: pre-wrap;
    }

    .test-btn {
      background: #0066cc;
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 6px;
      cursor: pointer;
      margin: 5px;
    }

    .test-btn:hover {
      background: #004499;
    }
  </style>
</head>
<body>
  <h1>Skip Functionality Test</h1>
  
  <div class="debug-info" id="debugOutput">
Debug output will appear here...
  </div>

  <div style="margin: 20px 0;">
    <button class="test-btn" onclick="testSkip('summary')">Test Skip Summary</button>
    <button class="test-btn" onclick="testSkip('experience')">Test Skip Experience</button>
    <button class="test-btn" onclick="clearDebug()">Clear Debug</button>
  </div>

  <!-- Test Sections -->
  <div class="form-section" id="section-summary">
    <h2 class="section-title">
      Professional Summary
      <span class="skip-link" onclick="toggleSection('summary')">Skip this section</span>
    </h2>
    <div class="form-content">
      <div class="form-group">
        <label for="summary">Summary</label>
        <textarea id="summary" rows="4" placeholder="Brief professional overview..."></textarea>
      </div>
    </div>
  </div>

  <div class="form-section" id="section-experience">
    <h2 class="section-title">
      Work Experience
      <span class="skip-link" onclick="toggleSection('experience')">Skip this section</span>
    </h2>
    <div class="form-content">
      <div class="form-group">
        <label for="jobTitle">Job Title</label>
        <input type="text" id="jobTitle" placeholder="Software Engineer">
      </div>
      <div class="form-group">
        <label for="company">Company</label>
        <input type="text" id="company" placeholder="Company Name">
      </div>
      <div class="form-group">
        <label for="description">Description</label>
        <textarea id="description" rows="3" placeholder="Key responsibilities..."></textarea>
      </div>
    </div>
  </div>

  <script>
    function log(message) {
      const output = document.getElementById('debugOutput');
      const timestamp = new Date().toLocaleTimeString();
      output.textContent += `[${timestamp}] ${message}\n`;
    }

    function clearDebug() {
      document.getElementById('debugOutput').textContent = 'Debug output cleared...\n';
    }

    function testSkip(section) {
      log(`Testing skip for section: ${section}`);
      toggleSection(section);
    }

    // Toggle entire section
    function toggleSection(section) {
      log(`toggleSection called with: ${section}`);
      
      const el = document.getElementById('section-' + section);
      log(`Found element: ${el ? 'YES' : 'NO'}`);
      
      if (!el) {
        log(`ERROR: Section element not found for: ${section}`);
        return;
      }
      
      const link = el.querySelector('.skip-link');
      log(`Found skip link: ${link ? 'YES' : 'NO'}`);
      
      if (!link) {
        log(`ERROR: Skip link not found for: ${section}`);
        return;
      }
      
      log(`Current classes before toggle: ${el.className}`);
      const wasSkipped = el.classList.contains('skipped');
      const isSkipped = el.classList.toggle('skipped');
      log(`Current classes after toggle: ${el.className}`);
      log(`Was skipped: ${wasSkipped}, Is skipped: ${isSkipped}`);
      
      link.textContent = isSkipped ? 'Show section' : 'Skip this section';
      
      try {
        localStorage.setItem('skip_section_' + section, isSkipped);
        log(`localStorage saved: skip_section_${section} = ${isSkipped}`);
      } catch (error) {
        log(`localStorage error: ${error.message}`);
      }
      
      log(`Section ${section} is now ${isSkipped ? 'SKIPPED' : 'SHOWN'}`);
      log('---');
    }

    // Initial log
    log('Skip functionality test page loaded');
    log('Ready for testing...');
  </script>
</body>
</html>
