<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Hiero - Instagram/LinkedIn Style Login</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: '#1D4ED8',
            secondary: '#6B7280',
          },
        },
      },
    }
  </script>
</head>
<body class="bg-gray-100 font-sans">
  <div id="root" class="min-h-screen"></div>

  <!-- CDN Dependencies -->
  <script src="https://cdn.jsdelivr.net/npm/react@18.2.0/umd/react.development.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/react-dom@18.2.0/umd/react-dom.development.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/axios@1.6.2/dist/axios.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/react-router-dom@6.22.0/dist/umd/react-router-dom.development.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@babel/standalone@7.23.6/babel.min.js"></script>

  <script type="text/babel">
    const { useState, useEffect, createContext, useContext } = React;
    const { BrowserRouter, Routes, Route, Link, useNavigate, useLocation } = ReactRouterDOM;

    // Axios Configuration
    const api = axios.create({
      baseURL: 'http://localhost:3000',
      headers: { 'Content-Type': 'application/json' },
    });

    // User Context for global state management
    const UserContext = createContext();

    // User Provider Component
    const UserProvider = ({ children }) => {
      const [user, setUser] = useState(null);
      const [loading, setLoading] = useState(true);

      // Check for existing session on app load
      useEffect(() => {
        checkExistingSession();
      }, []);

      const checkExistingSession = async () => {
        try {
          const token = localStorage.getItem('token');
          const userData = localStorage.getItem('user');
          
          if (token && userData) {
            // Verify token is still valid by calling /me endpoint
            api.defaults.headers.Authorization = `Bearer ${token}`;
            const response = await api.get('/me');
            
            // Session is valid, restore user data
            setUser(JSON.parse(userData));
          }
        } catch (error) {
          // Token expired or invalid, clear storage
          localStorage.removeItem('token');
          localStorage.removeItem('user');
          delete api.defaults.headers.Authorization;
        } finally {
          setLoading(false);
        }
      };

      const login = (token, userData) => {
        localStorage.setItem('token', token);
        localStorage.setItem('user', JSON.stringify(userData));
        api.defaults.headers.Authorization = `Bearer ${token}`;
        setUser(userData);
      };

      const logout = async () => {
        try {
          await api.post('/logout');
        } catch (error) {
          console.log('Logout request failed, but continuing with client-side logout');
        }
        
        localStorage.removeItem('token');
        localStorage.removeItem('user');
        delete api.defaults.headers.Authorization;
        setUser(null);
      };

      // Handle OAuth redirects
      useEffect(() => {
        const params = new URLSearchParams(window.location.search);
        const token = params.get('token');
        const userParam = params.get('user');
        
        if (token && userParam) {
          try {
            const userData = JSON.parse(decodeURIComponent(userParam));
            login(token, userData);
            
            // Clean URL
            window.history.replaceState({}, document.title, window.location.pathname);
          } catch (error) {
            console.error('Failed to parse OAuth user data:', error);
          }
        }
      }, []);

      return (
        <UserContext.Provider value={{ user, login, logout, loading }}>
          {children}
        </UserContext.Provider>
      );
    };

    // Enhanced Navigation Component with User Profile
    const Navbar = () => {
      const { user, logout } = useContext(UserContext);
      const navigate = useNavigate();

      const handleLogout = async () => {
        await logout();
        navigate('/');
      };

      return (
        <nav className="bg-primary text-white p-4 shadow-lg">
          <div className="container mx-auto flex justify-between items-center">
            <Link to="/" className="text-xl font-bold">üî• Hiero</Link>
            
            {user ? (
              <div className="flex items-center space-x-4">
                <span className="text-sm">Welcome back, {user.name}!</span>
                
                {/* User Profile Section */}
                <div className="flex items-center space-x-2">
                  {user.picture ? (
                    <img 
                      src={user.picture} 
                      alt={user.name}
                      className="w-8 h-8 rounded-full border-2 border-white"
                    />
                  ) : (
                    <div className="w-8 h-8 rounded-full bg-white text-primary flex items-center justify-center text-sm font-bold">
                      {user.name.charAt(0).toUpperCase()}
                    </div>
                  )}
                  <span className="font-medium">{user.name}</span>
                </div>
                
                <div className="flex space-x-2">
                  <Link to="/dashboard" className="px-3 py-1 bg-white bg-opacity-20 rounded hover:bg-opacity-30 transition-colors">
                    Dashboard
                  </Link>
                  <Link to="/profile" className="px-3 py-1 bg-white bg-opacity-20 rounded hover:bg-opacity-30 transition-colors">
                    Profile
                  </Link>
                  <button 
                    onClick={handleLogout} 
                    className="px-3 py-1 bg-red-500 rounded hover:bg-red-600 transition-colors"
                  >
                    Logout
                  </button>
                </div>
              </div>
            ) : (
              <div className="space-x-2">
                <Link to="/login" className="px-4 py-2 bg-white bg-opacity-20 rounded hover:bg-opacity-30 transition-colors">
                  Login
                </Link>
                <Link to="/signup" className="px-4 py-2 bg-white text-primary rounded hover:bg-gray-100 transition-colors">
                  Sign Up
                </Link>
              </div>
            )}
          </div>
        </nav>
      );
    };

    // Enhanced Signup Component
    const Signup = () => {
      const [formData, setFormData] = useState({ name: '', email: '', password: '' });
      const [message, setMessage] = useState('');
      const [loading, setLoading] = useState(false);
      const navigate = useNavigate();
      const { user } = useContext(UserContext);

      // Redirect if already logged in
      useEffect(() => {
        if (user) navigate('/dashboard');
      }, [user, navigate]);

      const handleChange = (e) => {
        setFormData({ ...formData, [e.target.name]: e.target.value });
      };

      const handleSubmit = async (e) => {
        e.preventDefault();
        setLoading(true);
        setMessage('');
        
        try {
          const res = await api.post('/signup', formData);
          setMessage('‚úÖ ' + res.data.message);
          setTimeout(() => navigate('/login'), 3000);
        } catch (err) {
          setMessage(`‚ùå ${err.response?.data?.error || 'Signup failed'}`);
        } finally {
          setLoading(false);
        }
      };

      return (
        <div className="container mx-auto p-4 max-w-md">
          <div className="bg-white rounded-lg shadow-lg p-6">
            <h2 className="text-3xl font-bold mb-6 text-center text-gray-800">Join Hiero</h2>
            
            {message && (
              <div className={`p-3 mb-4 rounded ${message.startsWith('‚úÖ') ? 'bg-green-100 text-green-700' : 'bg-red-100 text-red-700'}`}>
                {message}
              </div>
            )}
            
            <form onSubmit={handleSubmit} className="space-y-4">
              <input
                type="text"
                name="name"
                value={formData.name}
                onChange={handleChange}
                placeholder="Full Name"
                className="w-full p-3 border rounded-lg focus:border-primary focus:outline-none focus:ring-2 focus:ring-primary focus:ring-opacity-20"
                required
                disabled={loading}
              />
              <input
                type="email"
                name="email"
                value={formData.email}
                onChange={handleChange}
                placeholder="Email Address"
                className="w-full p-3 border rounded-lg focus:border-primary focus:outline-none focus:ring-2 focus:ring-primary focus:ring-opacity-20"
                required
                disabled={loading}
              />
              <input
                type="password"
                name="password"
                value={formData.password}
                onChange={handleChange}
                placeholder="Password (min 6 characters)"
                className="w-full p-3 border rounded-lg focus:border-primary focus:outline-none focus:ring-2 focus:ring-primary focus:ring-opacity-20"
                required
                disabled={loading}
                minLength="6"
              />
              <button 
                type="submit" 
                className="w-full bg-primary text-white p-3 rounded-lg hover:bg-blue-700 disabled:opacity-50 font-medium transition-colors"
                disabled={loading}
              >
                {loading ? 'Creating Account...' : 'Create Account'}
              </button>
            </form>
            
            <div className="mt-6">
              <div className="relative">
                <div className="absolute inset-0 flex items-center">
                  <div className="w-full border-t border-gray-300"></div>
                </div>
                <div className="relative flex justify-center text-sm">
                  <span className="px-2 bg-white text-gray-500">Or continue with</span>
                </div>
              </div>
              
              <div className="mt-4 space-y-2">
                <a 
                  href="http://localhost:3000/auth/google" 
                  className="w-full flex items-center justify-center px-4 py-3 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors"
                >
                  <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='%23EA4335' d='M5.266 9.765A7.077 7.077 0 0 1 12 4.909c1.69 0 3.218.6 4.418 1.582L19.91 3C17.782 1.145 15.055 0 12 0 7.27 0 3.198 2.698 1.24 6.65l4.026 3.115Z'/%3E%3Cpath fill='%2334A853' d='M16.04 18.013c-1.09.703-2.474 1.078-4.04 1.078a7.077 7.077 0 0 1-6.723-4.823l-4.04 3.067A11.965 11.965 0 0 0 12 24c2.933 0 5.735-1.043 7.834-3l-3.793-2.987Z'/%3E%3Cpath fill='%23FBBC05' d='M19.834 21c2.195-2.048 3.62-5.096 3.62-9 0-.71-.109-1.473-.272-2.182H12v4.637h6.436c-.317 1.559-1.17 2.766-2.395 3.558L19.834 21Z'/%3E%3Cpath fill='%23EA4335' d='M5.277 14.268A7.12 7.12 0 0 1 4.909 12c0-.782.125-1.533.357-2.235L1.24 6.65A11.934 11.934 0 0 0 0 12c0 1.92.445 3.73 1.237 5.335l4.04-3.067Z'/%3E%3C/svg%3E" alt="Google" className="w-5 h-5 mr-2" />
                  Continue with Google
                </a>
                <a 
                  href="http://localhost:3000/auth/github" 
                  className="w-full flex items-center justify-center px-4 py-3 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors"
                >
                  <svg className="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                    <path fillRule="evenodd" d="M10 0C4.477 0 0 4.484 0 10.017c0 4.425 2.865 8.18 6.839 9.504.5.092.682-.217.682-.483 0-.237-.008-.868-.013-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.113-4.555-4.951 0-1.093.39-1.988 1.029-2.688-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.026A9.564 9.564 0 0110 4.844c.85.004 1.705.115 2.504.337 1.909-1.296 2.747-1.027 2.747-1.027.546 1.379.203 2.398.1 2.651.64.7 1.028 1.595 1.028 2.688 0 3.848-2.339 4.695-4.566 4.942.359.31.678.921.678 1.856 0 1.338-.012 2.419-.012 2.747 0 .268.18.58.688.482A10.019 10.019 0 0020 10.017C20 4.484 15.522 0 10 0z" clipRule="evenodd"></path>
                  </svg>
                  Continue with GitHub
                </a>
              </div>
            </div>
            
            <div className="mt-6 text-center">
              <p className="text-gray-600">
                Already have an account? <Link to="/login" className="text-primary hover:underline font-medium">Sign in</Link>
              </p>
            </div>
          </div>
        </div>
      );
    };

    // Enhanced Login Component
    const Login = () => {
      const [formData, setFormData] = useState({ email: '', password: '' });
      const [message, setMessage] = useState('');
      const [loading, setLoading] = useState(false);
      const navigate = useNavigate();
      const location = useLocation();
      const { user, login } = useContext(UserContext);

      // Redirect if already logged in
      useEffect(() => {
        if (user) navigate('/dashboard');
      }, [user, navigate]);

      useEffect(() => {
        // Check for verification success
        const params = new URLSearchParams(location.search);
        if (params.get('verified') === 'true') {
          setMessage('‚úÖ Email verified successfully! You can now login.');
        }
      }, [location]);

      const handleChange = (e) => {
        setFormData({ ...formData, [e.target.name]: e.target.value });
      };

      const handleSubmit = async (e) => {
        e.preventDefault();
        setLoading(true);
        setMessage('');
        
        try {
          const res = await api.post('/login', formData);
          login(res.data.token, res.data.user);
          setMessage('‚úÖ Login successful! Redirecting...');
          setTimeout(() => navigate('/dashboard'), 1000);
        } catch (err) {
          setMessage(`‚ùå ${err.response?.data?.error || 'Login failed'}`);
        } finally {
          setLoading(false);
        }
      };

      return (
        <div className="container mx-auto p-4 max-w-md">
          <div className="bg-white rounded-lg shadow-lg p-6">
            <h2 className="text-3xl font-bold mb-6 text-center text-gray-800">Welcome Back</h2>
            
            {message && (
              <div className={`p-3 mb-4 rounded ${message.startsWith('‚úÖ') ? 'bg-green-100 text-green-700' : 'bg-red-100 text-red-700'}`}>
                {message}
              </div>
            )}
            
            <form onSubmit={handleSubmit} className="space-y-4">
              <input
                type="email"
                name="email"
                value={formData.email}
                onChange={handleChange}
                placeholder="Email"
                className="w-full p-3 border rounded-lg focus:border-primary focus:outline-none focus:ring-2 focus:ring-primary focus:ring-opacity-20"
                required
                disabled={loading}
              />
              <input
                type="password"
                name="password"
                value={formData.password}
                onChange={handleChange}
                placeholder="Password"
                className="w-full p-3 border rounded-lg focus:border-primary focus:outline-none focus:ring-2 focus:ring-primary focus:ring-opacity-20"
                required
                disabled={loading}
              />
              <button 
                type="submit" 
                className="w-full bg-primary text-white p-3 rounded-lg hover:bg-blue-700 disabled:opacity-50 font-medium transition-colors"
                disabled={loading}
              >
                {loading ? 'Signing in...' : 'Sign In'}
              </button>
            </form>
            
            <div className="mt-6">
              <div className="relative">
                <div className="absolute inset-0 flex items-center">
                  <div className="w-full border-t border-gray-300"></div>
                </div>
                <div className="relative flex justify-center text-sm">
                  <span className="px-2 bg-white text-gray-500">Or continue with</span>
                </div>
              </div>
              
              <div className="mt-4 space-y-2">
                <a 
                  href="http://localhost:3000/auth/google" 
                  className="w-full flex items-center justify-center px-4 py-3 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors"
                >
                  <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='%23EA4335' d='M5.266 9.765A7.077 7.077 0 0 1 12 4.909c1.69 0 3.218.6 4.418 1.582L19.91 3C17.782 1.145 15.055 0 12 0 7.27 0 3.198 2.698 1.24 6.65l4.026 3.115Z'/%3E%3Cpath fill='%2334A853' d='M16.04 18.013c-1.09.703-2.474 1.078-4.04 1.078a7.077 7.077 0 0 1-6.723-4.823l-4.04 3.067A11.965 11.965 0 0 0 12 24c2.933 0 5.735-1.043 7.834-3l-3.793-2.987Z'/%3E%3Cpath fill='%23FBBC05' d='M19.834 21c2.195-2.048 3.62-5.096 3.62-9 0-.71-.109-1.473-.272-2.182H12v4.637h6.436c-.317 1.559-1.17 2.766-2.395 3.558L19.834 21Z'/%3E%3Cpath fill='%23EA4335' d='M5.277 14.268A7.12 7.12 0 0 1 4.909 12c0-.782.125-1.533.357-2.235L1.24 6.65A11.934 11.934 0 0 0 0 12c0 1.92.445 3.73 1.237 5.335l4.04-3.067Z'/%3E%3C/svg%3E" alt="Google" className="w-5 h-5 mr-2" />
                  Continue with Google
                </a>
                <a 
                  href="http://localhost:3000/auth/github" 
                  className="w-full flex items-center justify-center px-4 py-3 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors"
                >
                  <svg className="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                    <path fillRule="evenodd" d="M10 0C4.477 0 0 4.484 0 10.017c0 4.425 2.865 8.18 6.839 9.504.5.092.682-.217.682-.483 0-.237-.008-.868-.013-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.113-4.555-4.951 0-1.093.39-1.988 1.029-2.688-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.026A9.564 9.564 0 0110 4.844c.85.004 1.705.115 2.504.337 1.909-1.296 2.747-1.027 2.747-1.027.546 1.379.203 2.398.1 2.651.64.7 1.028 1.595 1.028 2.688 0 3.848-2.339 4.695-4.566 4.942.359.31.678.921.678 1.856 0 1.338-.012 2.419-.012 2.747 0 .268.18.58.688.482A10.019 10.019 0 0020 10.017C20 4.484 15.522 0 10 0z" clipRule="evenodd"></path>
                  </svg>
                  Continue with GitHub
                </a>
              </div>
            </div>
            
            <div className="mt-6 text-center">
              <p className="text-gray-600">
                Don't have an account? <Link to="/signup" className="text-primary hover:underline font-medium">Sign up</Link>
              </p>
            </div>
          </div>
        </div>
      );
    };

    // Enhanced Dashboard Component
    const Dashboard = () => {
      const { user } = useContext(UserContext);
      const [dashboardData, setDashboardData] = useState(null);
      const [loading, setLoading] = useState(true);
      const navigate = useNavigate();

      useEffect(() => {
        if (!user) {
          navigate('/login');
          return;
        }
        fetchDashboardData();
      }, [user, navigate]);

      const fetchDashboardData = async () => {
        try {
          const response = await api.get('/dashboard');
          setDashboardData(response.data);
        } catch (error) {
          console.error('Failed to fetch dashboard data:', error);
        } finally {
          setLoading(false);
        }
      };

      if (loading) {
        return (
          <div className="flex items-center justify-center min-h-screen">
            <div className="animate-spin rounded-full h-12 w-12 border-b-2 border-primary"></div>
          </div>
        );
      }

      return (
        <div className="container mx-auto p-6">
          <div className="bg-white rounded-lg shadow-lg p-6 mb-6">
            <div className="flex items-center space-x-4 mb-6">
              {user.picture ? (
                <img 
                  src={user.picture} 
                  alt={user.name}
                  className="w-16 h-16 rounded-full border-4 border-primary"
                />
              ) : (
                <div className="w-16 h-16 rounded-full bg-primary text-white flex items-center justify-center text-2xl font-bold">
                  {user.name.charAt(0).toUpperCase()}
                </div>
              )}
              <div>
                <h1 className="text-3xl font-bold text-gray-800">{dashboardData?.message || `Welcome, ${user.name}!`}</h1>
                <p className="text-gray-600">
                  Signed in via {user.signupMethod} ‚Ä¢ 
                  {user.emailVerified ? ' ‚úÖ Verified' : ' ‚ö†Ô∏è Unverified'}
                </p>
              </div>
            </div>

            <div className="grid md:grid-cols-3 gap-6">
              <div className="bg-blue-50 p-4 rounded-lg">
                <h3 className="font-semibold text-blue-800 mb-2">Profile</h3>
                <p className="text-sm text-gray-600 mb-1">Name: {user.name}</p>
                <p className="text-sm text-gray-600 mb-1">Email: {user.email}</p>
                <p className="text-sm text-gray-600">Method: {user.signupMethod}</p>
              </div>

              <div className="bg-green-50 p-4 rounded-lg">
                <h3 className="font-semibold text-green-800 mb-2">Quick Actions</h3>
                <div className="space-y-2">
                  <Link to="/profile" className="block text-sm text-green-700 hover:underline">Edit Profile</Link>
                  <Link to="/resume" className="block text-sm text-green-700 hover:underline">Build Resume</Link>
                  <Link to="/settings" className="block text-sm text-green-700 hover:underline">Settings</Link>
                </div>
              </div>

              <div className="bg-purple-50 p-4 rounded-lg">
                <h3 className="font-semibold text-purple-800 mb-2">Recent Activity</h3>
                <p className="text-sm text-gray-600">Last login: Just now</p>
                <p className="text-sm text-gray-600">Session expires: In 7 days</p>
              </div>
            </div>
          </div>

          {/* Additional dashboard content */}
          <div className="grid md:grid-cols-2 gap-6">
            <div className="bg-white rounded-lg shadow-lg p-6">
              <h2 className="text-xl font-bold mb-4">Getting Started</h2>
              <ul className="space-y-2">
                <li className="flex items-center">
                  <span className="text-green-500 mr-2">‚úì</span>
                  Account created and verified
                </li>
                <li className="flex items-center">
                  <span className="text-gray-400 mr-2">‚óã</span>
                  Complete your profile
                </li>
                <li className="flex items-center">
                  <span className="text-gray-400 mr-2">‚óã</span>
                  Build your first resume
                </li>
                <li className="flex items-center">
                  <span className="text-gray-400 mr-2">‚óã</span>
                  Explore job matching
                </li>
              </ul>
            </div>

            <div className="bg-white rounded-lg shadow-lg p-6">
              <h2 className="text-xl font-bold mb-4">Tips & Features</h2>
              <div className="space-y-3">
                <div className="border-l-4 border-primary pl-3">
                  <p className="text-sm font-medium">Stay Logged In</p>
                  <p className="text-xs text-gray-600">Your session will persist for 7 days, just like Instagram and LinkedIn!</p>
                </div>
                <div className="border-l-4 border-primary pl-3">
                  <p className="text-sm font-medium">Profile Picture</p>
                  <p className="text-xs text-gray-600">Social login users get automatic profile pictures from their accounts.</p>
                </div>
              </div>
            </div>
          </div>
        </div>
      );
    };

    // Profile Page Component
    const Profile = () => {
      const { user } = useContext(UserContext);
      const navigate = useNavigate();

      useEffect(() => {
        if (!user) navigate('/login');
      }, [user, navigate]);

      if (!user) return null;

      return (
        <div className="container mx-auto p-6">
          <div className="bg-white rounded-lg shadow-lg p-6">
            <h1 className="text-2xl font-bold mb-6">User Profile</h1>
            <div className="space-y-4">
              <div>
                <label className="block text-sm font-medium text-gray-700">Profile Picture</label>
                {user.picture ? (
                  <img src={user.picture} alt={user.name} className="w-20 h-20 rounded-full mt-1" />
                ) : (
                  <div className="w-20 h-20 rounded-full bg-primary text-white flex items-center justify-center text-xl font-bold mt-1">
                    {user.name.charAt(0).toUpperCase()}
                  </div>
                )}
              </div>
              <div>
                <label className="block text-sm font-medium text-gray-700">Name</label>
                <p className="mt-1 text-sm text-gray-900">{user.name}</p>
              </div>
              <div>
                <label className="block text-sm font-medium text-gray-700">Email</label>
                <p className="mt-1 text-sm text-gray-900">{user.email}</p>
              </div>
              <div>
                <label className="block text-sm font-medium text-gray-700">Login Method</label>
                <p className="mt-1 text-sm text-gray-900 capitalize">{user.signupMethod}</p>
              </div>
              <div>
                <label className="block text-sm font-medium text-gray-700">Email Verification</label>
                <p className="mt-1 text-sm text-gray-900">
                  {user.emailVerified ? '‚úÖ Verified' : '‚ö†Ô∏è Not Verified'}
                </p>
              </div>
            </div>
          </div>
        </div>
      );
    };

    // Home Component
    const Home = () => {
      const { user } = useContext(UserContext);
      
      if (user) {
        return <Dashboard />;
      }

      return (
        <div className="container mx-auto p-6 text-center">
          <div className="bg-white rounded-lg shadow-lg p-8">
            <h1 className="text-4xl font-bold mb-4 text-gray-800">üî• Welcome to Hiero</h1>
            <p className="text-xl text-gray-600 mb-8">Your AI-powered career companion</p>
            <div className="space-x-4">
              <Link to="/signup" className="px-6 py-3 bg-primary text-white rounded-lg hover:bg-blue-700 transition-colors">
                Get Started
              </Link>
              <Link to="/login" className="px-6 py-3 border border-primary text-primary rounded-lg hover:bg-primary hover:text-white transition-colors">
                Sign In
              </Link>
            </div>
          </div>
        </div>
      );
    };

    // Protected Route Component
    const ProtectedRoute = ({ children }) => {
      const { user, loading } = useContext(UserContext);
      const navigate = useNavigate();

      useEffect(() => {
        if (!loading && !user) {
          navigate('/login');
        }
      }, [user, loading, navigate]);

      if (loading) {
        return (
          <div className="flex items-center justify-center min-h-screen">
            <div className="animate-spin rounded-full h-12 w-12 border-b-2 border-primary"></div>
          </div>
        );
      }

      return user ? children : null;
    };

    // Main App Component
    const App = () => {
      return (
        <UserProvider>
          <BrowserRouter>
            <div className="min-h-screen bg-gray-100">
              <Navbar />
              <Routes>
                <Route path="/" element={<Home />} />
                <Route path="/login" element={<Login />} />
                <Route path="/signup" element={<Signup />} />
                <Route path="/dashboard" element={
                  <ProtectedRoute>
                    <Dashboard />
                  </ProtectedRoute>
                } />
                <Route path="/profile" element={
                  <ProtectedRoute>
                    <Profile />
                  </ProtectedRoute>
                } />
              </Routes>
            </div>
          </BrowserRouter>
        </UserProvider>
      );
    };

    // Render the app
    ReactDOM.render(<App />, document.getElementById('root'));
  </script>
</body>
</html>
