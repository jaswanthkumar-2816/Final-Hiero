# ğŸ¨ Visual Flow Diagram - Review System

## ğŸ“Š System Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         USER FLOW                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ğŸ‘¤ User
  â”‚
  â”œâ”€â”€â”€ 1. LOGIN
  â”‚    â”‚
  â”‚    â”œâ”€â”€â†’ POST /api/auth/login
  â”‚    â”‚    â””â”€â”€â†’ Returns JWT Token
  â”‚    â”‚
  â”‚    â””â”€â”€â†’ Frontend stores token in localStorage
  â”‚
  â”‚
  â”œâ”€â”€â”€ 2. DASHBOARD LOADS (index.html)
  â”‚    â”‚
  â”‚    â”œâ”€â”€â†’ Checks token validity
  â”‚    â”‚
  â”‚    â”œâ”€â”€â†’ Displays user profile
  â”‚    â”‚
  â”‚    â”œâ”€â”€â†’ ğŸ“Š Tracks Login (POST /api/login-track)
  â”‚    â”‚    â”‚
  â”‚    â”‚    â””â”€â”€â†’ LoginTracking DB:
  â”‚    â”‚         {
  â”‚    â”‚           userId: "abc123",
  â”‚    â”‚           userEmail: "user@example.com",
  â”‚    â”‚           loginTimestamp: "2025-11-24T10:00:00"
  â”‚    â”‚         }
  â”‚    â”‚
  â”‚    â”œâ”€â”€â†’ ğŸ” Checks Admin Status (GET /api/admin/check)
  â”‚    â”‚    â”‚
  â”‚    â”‚    â””â”€â”€â†’ If admin: Shows admin button
  â”‚    â”‚
  â”‚    â””â”€â”€â†’ ğŸ“– Loads Existing Review (GET /api/review)
  â”‚         â”‚
  â”‚         â””â”€â”€â†’ If has review: Displays it
  â”‚              If no review: Shows empty form
  â”‚
  â”‚
  â”œâ”€â”€â”€ 3. SUBMIT/UPDATE REVIEW
  â”‚    â”‚
  â”‚    â”œâ”€â”€â†’ User selects stars (1-5)
  â”‚    â”‚
  â”‚    â”œâ”€â”€â†’ User writes review text
  â”‚    â”‚
  â”‚    â”œâ”€â”€â†’ Clicks "Submit Review"
  â”‚    â”‚
  â”‚    â””â”€â”€â†’ POST /api/review
  â”‚         â”‚
  â”‚         â””â”€â”€â†’ Review DB:
  â”‚              {
  â”‚                userId: "abc123" (unique!),
  â”‚                rating: 5,
  â”‚                reviewText: "Great platform!",
  â”‚                createdAt: "2025-11-24T10:05:00",
  â”‚                updatedAt: "2025-11-24T10:05:00"
  â”‚              }
  â”‚
  â”‚
  â””â”€â”€â”€ 4. EDIT REVIEW (Optional)
       â”‚
       â”œâ”€â”€â†’ Clicks "Edit Review"
       â”‚
       â”œâ”€â”€â†’ Modifies rating/text
       â”‚
       â””â”€â”€â†’ POST /api/review (updates existing)
            â””â”€â”€â†’ Updates updatedAt timestamp


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         ADMIN FLOW                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ğŸ‘¨â€ğŸ’¼ Admin User
  â”‚
  â”œâ”€â”€â”€ 1. LOGIN (with admin email)
  â”‚    â”‚
  â”‚    â””â”€â”€â†’ Same as user login
  â”‚
  â”‚
  â”œâ”€â”€â”€ 2. DASHBOARD LOADS
  â”‚    â”‚
  â”‚    â”œâ”€â”€â†’ ğŸ” GET /api/admin/check
  â”‚    â”‚    â”‚
  â”‚    â”‚    â””â”€â”€â†’ Checks if email in ADMIN_EMAILS[]
  â”‚    â”‚         â”‚
  â”‚    â”‚         â””â”€â”€â†’ Returns: { isAdmin: true }
  â”‚    â”‚
  â”‚    â””â”€â”€â†’ ğŸ›ï¸ Shows "Admin Dashboard" button
  â”‚
  â”‚
  â””â”€â”€â”€ 3. ADMIN DASHBOARD (admin-dashboard.html)
       â”‚
       â”œâ”€â”€â†’ GET /api/admin/dashboard
       â”‚    â”‚
       â”‚    â””â”€â”€â†’ Returns:
       â”‚         {
       â”‚           analytics: {
       â”‚             totalUsers: 10,
       â”‚             uniqueUsersCount: 8,    â† Unique users!
       â”‚             totalVisits: 25,
       â”‚             averageRating: 4.5,
       â”‚             totalReviews: 7
       â”‚           },
       â”‚           users: [...],
       â”‚           reviews: [...]
       â”‚         }
       â”‚
       â””â”€â”€â†’ Displays:
            â”œâ”€ Statistics cards
            â”œâ”€ User analytics table
            â””â”€ All reviews


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    UNIQUE USER TRACKING                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Scenario: Same user logs in multiple times

ğŸ‘¤ User: john@example.com
   â”‚
   â”œâ”€â”€â”€ Login #1 (Monday 9 AM)
   â”‚    â”‚
   â”‚    â””â”€â”€â†’ LoginTracking DB:
   â”‚         {
   â”‚           userId: "user_001",           â† Same userId
   â”‚           userEmail: "john@example.com",
   â”‚           loginTimestamp: "2025-11-24T09:00:00"
   â”‚         }
   â”‚
   â”œâ”€â”€â”€ Login #2 (Monday 2 PM)
   â”‚    â”‚
   â”‚    â””â”€â”€â†’ LoginTracking DB:
   â”‚         {
   â”‚           userId: "user_001",           â† Same userId
   â”‚           userEmail: "john@example.com",
   â”‚           loginTimestamp: "2025-11-24T14:00:00"
   â”‚         }
   â”‚
   â”œâ”€â”€â”€ Login #3 (Tuesday 10 AM)
   â”‚    â”‚
   â”‚    â””â”€â”€â†’ LoginTracking DB:
   â”‚         {
   â”‚           userId: "user_001",           â† Same userId
   â”‚           userEmail: "john@example.com",
   â”‚           loginTimestamp: "2025-11-25T10:00:00"
   â”‚         }
   â”‚
   â””â”€â”€â”€ Result in Admin Dashboard:
        â”‚
        â”œâ”€ Total Logins: 3           â† All login attempts
        â””â”€ Unique Visitors: 1         â† Counted once! âœ…

How it works:
   LoginTracking.distinct('userId')
   â†’ Returns: ["user_001"]
   â†’ Count: 1 unique user


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  DATABASE RELATIONSHIPS                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    User      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ _id          â”‚ â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ username     â”‚            â”‚
â”‚ email        â”‚            â”‚
â”‚ password     â”‚            â”‚
â”‚ createdAt    â”‚            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
                            â”‚
                            â”‚ Foreign Key
                            â”‚ (userId)
                            â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                   â”‚                   â”‚
        â”‚                   â”‚                   â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Review     â”‚    â”‚LoginTracking â”‚    â”‚   Resume     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ userId       â”‚â”€â”€â”€â”€â”‚ userId       â”‚â”€â”€â”€â”€â”‚ userId       â”‚
â”‚ userEmail    â”‚    â”‚ userEmail    â”‚    â”‚ ...          â”‚
â”‚ userName     â”‚    â”‚ userName     â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ rating       â”‚    â”‚ loginTime    â”‚
â”‚ reviewText   â”‚    â”‚ ipAddress    â”‚
â”‚ createdAt    â”‚    â”‚ userAgent    â”‚
â”‚ updatedAt    â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  â”‚
  â”‚ Unique constraint on userId
  â””â”€â”€â†’ One review per user only!


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    REVIEW SUBMISSION FLOW                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

User submits review:

                    POST /api/review
                    {
                      rating: 5,
                      reviewText: "Excellent!"
                    }
                           â”‚
                           â†“
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚ Authenticate    â”‚
                  â”‚ JWT Token       â”‚
                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â†“
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚ Validate Input  â”‚
                  â”‚ - Rating: 1-5?  â”‚
                  â”‚ - Text: < 1000? â”‚
                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â†“
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚ Check Existing  â”‚
                  â”‚ Review          â”‚
                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚                     â”‚
         Found  â†“              Not Found â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ UPDATE       â”‚       â”‚ CREATE NEW   â”‚
    â”‚ Existing     â”‚       â”‚ Review       â”‚
    â”‚ Review       â”‚       â”‚              â”‚
    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚                      â”‚
           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â†“
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚ Save to DB   â”‚
              â”‚              â”‚
              â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                     â†“
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚ Return       â”‚
              â”‚ Success      â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ANALYTICS CALCULATION                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

When admin loads dashboard:

1. Total Users:
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ User.countDocuments()        â”‚
   â”‚ Returns: 10                  â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

2. Unique Visitors:
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ LoginTracking.distinct(      â”‚
   â”‚   'userId'                   â”‚
   â”‚ )                            â”‚
   â”‚ Returns: ["id1", "id2",...]  â”‚
   â”‚ Count: 8                     â”‚â† Unique users who logged in
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

3. Total Visits:
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ LoginTracking.count          â”‚
   â”‚ Documents()                  â”‚
   â”‚ Returns: 25                  â”‚â† All login attempts
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

4. Average Rating:
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ allReviews = Review.find()   â”‚
   â”‚ sum = 0                      â”‚
   â”‚ for each review:             â”‚
   â”‚   sum += review.rating       â”‚
   â”‚                              â”‚
   â”‚ avg = sum / total reviews    â”‚
   â”‚ Returns: 4.5                 â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

5. Total Reviews:
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ Review.countDocuments()      â”‚
   â”‚ Returns: 7                   â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    SECURITY LAYERS                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Every API call goes through:

Request
  â”‚
  â””â”€â”€â†’ 1. CORS Check
       â”‚  â”œâ”€ Origin allowed?
       â”‚  â””â”€ Method allowed?
       â”‚
       â””â”€â”€â†’ 2. JWT Verification
            â”‚  â”œâ”€ Token present?
            â”‚  â”œâ”€ Token valid?
            â”‚  â””â”€ Token expired?
            â”‚
            â””â”€â”€â†’ 3. User Lookup
                 â”‚  â””â”€ User exists in DB?
                 â”‚
                 â””â”€â”€â†’ 4. Authorization Check (Admin only)
                      â”‚  â””â”€ Email in ADMIN_EMAILS?
                      â”‚
                      â””â”€â”€â†’ 5. Input Validation
                           â”‚  â”œâ”€ Required fields?
                           â”‚  â”œâ”€ Data types correct?
                           â”‚  â””â”€ Length limits?
                           â”‚
                           â””â”€â”€â†’ 6. Process Request
                                â””â”€â”€â†’ Success/Error Response


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    UI COMPONENT STATES                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Review Section States:

State 1: No Review (Initial)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â­ Rate Your Experience    â”‚
â”‚                            â”‚
â”‚ â˜† â˜† â˜† â˜† â˜†                â”‚â† Clickable stars
â”‚                            â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ Write your feedback... â”‚ â”‚â† Empty textarea
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                            â”‚
â”‚  [Submit Review]           â”‚â† Enabled button
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

State 2: Has Review (Display)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â­ Rate Your Experience    â”‚
â”‚                            â”‚
â”‚ Your Rating: â­â­â­â­â­ (5/5)â”‚
â”‚ Your Review:               â”‚
â”‚ "Great platform! Love it!" â”‚
â”‚                            â”‚
â”‚  [Edit Review]             â”‚â† Edit button
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

State 3: Editing Review
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â­ Rate Your Experience    â”‚
â”‚                            â”‚
â”‚ â˜… â˜… â˜… â˜… â˜†                â”‚â† Active stars
â”‚                            â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ Great platform!...     â”‚ â”‚â† Pre-filled text
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚        950/1000 chars      â”‚â† Character count
â”‚                            â”‚
â”‚  [Update Review]           â”‚â† Update button
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ERROR HANDLING                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Possible Errors & Responses:

1. No Token
   Request â†’ No Authorization header
   Response: 401 Unauthorized
   Frontend: Redirect to /login

2. Invalid Token
   Request â†’ Bad/expired token
   Response: 403 Forbidden
   Frontend: Clear storage, redirect to /login

3. Not Admin
   Request â†’ GET /api/admin/dashboard
   Response: 403 Access Denied
   Frontend: Show "Access Denied" message

4. Invalid Rating
   Request â†’ { rating: 6 }
   Response: 400 Bad Request
   Frontend: Show "Rating must be 1-5"

5. Empty Review
   Request â†’ { reviewText: "" }
   Response: 400 Bad Request
   Frontend: Show "Please write a review"

6. Server Error
   Request â†’ Any endpoint
   Response: 500 Internal Server Error
   Frontend: Show "Please try again later"


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    FILE STRUCTURE                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

hiero backend/
â”œâ”€â”€ models/
â”‚   â”œâ”€â”€ User.js              â† User schema
â”‚   â”œâ”€â”€ Review.js            â† Review schema (unique userId)
â”‚   â””â”€â”€ LoginTracking.js     â† Login tracking schema
â”‚
â”œâ”€â”€ routes/
â”‚   â””â”€â”€ reviewRoutes.js      â† All review & admin routes
â”‚
â””â”€â”€ server.js                â† Main server, mounts routes

hiero last prtotype/jss/hiero/hiero last/public/
â”œâ”€â”€ index.html               â† Main dashboard + review section
â””â”€â”€ admin-dashboard.html     â† Admin analytics dashboard


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    API ENDPOINTS MAP                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

User Endpoints:
â”œâ”€â”€ POST   /api/auth/login          â†’ Login & get token
â”œâ”€â”€ POST   /api/auth/signup         â†’ Register new user
â”œâ”€â”€ POST   /api/review              â†’ Submit/update review
â”œâ”€â”€ GET    /api/review              â†’ Get own review
â””â”€â”€ POST   /api/login-track         â†’ Track login

Admin Endpoints:
â”œâ”€â”€ GET    /api/admin/check         â†’ Check if admin
â””â”€â”€ GET    /api/admin/dashboard     â†’ Get all analytics

Public Endpoints:
â”œâ”€â”€ GET    /health                  â†’ Backend health check
â””â”€â”€ GET    /api/test                â†’ Test endpoint


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    SUMMARY                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

âœ… Users can rate and review (1-5 stars + text)
âœ… One review per user (enforced by unique userId)
âœ… Users can edit their reviews anytime
âœ… Login tracking (tracks every login attempt)
âœ… Unique user counting (same user = 1 count)
âœ… Admin dashboard (statistics + user analytics)
âœ… Admin-only access (email-based authorization)
âœ… Beautiful, responsive UI
âœ… Secure JWT authentication
âœ… Real-time updates and feedback

Total Implementation:
- 3 files modified
- 1 file created
- 6 API endpoints
- 3 database models (already existed)
- Full security implementation
- Complete admin system
- User review system

ğŸ‰ Everything is connected and working!
